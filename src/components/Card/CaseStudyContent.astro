---
export interface Props {
  title: string;
  summary?: string;
  imageSrc?: string | { src: string } | any;
  altText?: string;
  linkHref?: string;
  linkText?: string;
  class?: string;
}

const {
  title,
  summary,
  imageSrc,
  altText = '',
  linkHref = '#',
  linkText = 'read full case study',
  class: className = '',
} = Astro.props;
---

<div class={`flex flex-col h-full case-study-content__wrapper ${className}`}>
  <div class="case-study-content__text-section flex flex-col gap-4 flex-shrink-0 mb-4">
    <h3 class="case-study-content__title text-left">{title}</h3>
    {summary && <p class="case-study-content__summary text-left">{summary}</p>}
  </div>

  {imageSrc && (
    <div class="relative w-full aspect-[4/3] overflow-hidden mb-4 flex-shrink-0">
      <img 
        src={typeof imageSrc === 'string' ? imageSrc : imageSrc.src} 
        alt={altText} 
        loading="lazy" 
        class="w-full h-full object-contain block" 
      />
    </div>
  )}

  {linkHref && linkText && (
    <a href={linkHref} class="mt-auto inline-block no-underline transition-opacity duration-200 hover:opacity-80 focus-visible:outline-2 focus-visible:outline-[var(--color-accent-amethyst)] focus-visible:outline-offset-2 focus-visible:rounded-sm case-study-content__link text-left flex-shrink-0" aria-label={`${linkText} - ${title}`}>
      {linkText} â†’
    </a>
  )}
</div>

<style>
  .case-study-content__title {
    font-family: var(--font-heading);
    font-size: var(--text-lg); /* 20px - Mulish bold */
    line-height: var(--leading-tight);
    font-weight: var(--font-bold);
    color: var(--color-text-darker);
    text-align: left;
    margin: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .case-study-content__summary {
    font-family: var(--font-body);
    font-size: var(--text-base); /* 18px - Mulish regular */
    font-weight: var(--font-regular);
    line-height: var(--leading-relaxed);
    color: var(--color-text-dark);
    text-align: left;
    margin: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .case-study-content__link {
    color: var(--color-accent-amethyst);
    font-family: var(--font-heading);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    text-align: left;
    display: inline-block;
  }

  .case-study-content__wrapper {
    padding-top: 1.5rem; 
  }

  .case-study-content__text-section {
    /* No fixed height on mobile - let content flow naturally */
  }

  @media (min-width: 768px) {
    .case-study-content__title,
    .case-study-content__summary,
    .case-study-content__link {
      text-align: left;
    }

    .case-study-content__wrapper {
      padding-top: 1.5rem; 
    }

    .case-study-content__text-section {
      height: 180px; /* Fixed height on desktop to align images */
      overflow: hidden; /* Prevent content from exceeding fixed height */
    }
  }

  @media (max-width: 768px) {
    .case-study-content__title {
      font-size: var(--text-xl);
    }

    .case-study-content__summary {
      font-size: var(--text-sm);
      margin-bottom: var(--space-2);
    }

    .case-study-content__text-section {
      /* No height constraint on mobile - allow full text to display */
      overflow: visible;
    }
  }
</style>

