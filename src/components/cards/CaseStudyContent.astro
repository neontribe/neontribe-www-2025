---
export interface Props {
  title: string;
  summary?: string;
  imageSrc?: string | { src: string } | any;
  altText?: string;
  linkHref?: string;
  linkText?: string;
  class?: string;
}

const {
  title,
  summary,
  imageSrc,
  altText = '',
  linkHref = '#',
  linkText = 'read full case study',
  class: className = '',
} = Astro.props;
---

<div class={`case-study-content ${className}`}>
  <div class="case-study-content__body">
    <h3 class="case-study-content__title">{title}</h3>
    {summary && <p class="case-study-content__summary">{summary}</p>}
  </div>

  {imageSrc && (
    <div class="case-study-content__image-wrapper">
      <img 
        src={typeof imageSrc === 'string' ? imageSrc : imageSrc.src} 
        alt={altText} 
        loading="lazy" 
        class="case-study-content__image" 
      />
    </div>
  )}

  {linkHref && linkText && (
    <a href={linkHref} class="case-study-content__link" aria-label={`${linkText} - ${title}`}>
      {linkText} â†’
    </a>
  )}
</div>

<style>
  .case-study-content {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .case-study-content__body {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    height: 180px; 
  }

  .case-study-content__title {
    font-family: var(--font-heading);
    font-size: var(--text-lg); /* 20px - Mulish bold */
    line-height: var(--leading-tight);
    font-weight: var(--font-bold);
    color: var(--color-text-darker);
  }

  .case-study-content__summary {
    font-family: var(--font-body);
    font-size: var(--text-base); /* 18px - Mulish regular */
    font-weight: var(--font-regular);
    line-height: var(--leading-relaxed);
    color: var(--color-text-dark);
  }

  .case-study-content__image-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: 4 / 3;
    overflow: hidden;
    margin-bottom: var(--space-4);
  }

  .case-study-content__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .case-study-content__link {
    margin-top: auto;
    display: inline-block;
    color: var(--color-accent-amethyst);
    font-family: var(--font-heading);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    text-decoration: none;
    transition: opacity 0.2s ease;
  }

  .case-study-content__link:hover {
    opacity: 0.8;
  }

  .case-study-content__link:focus-visible {
    outline: 2px solid var(--color-accent-amethyst);
    outline-offset: 2px;
    border-radius: 2px;
  }

  @media (max-width: 768px) {
    .case-study-content__body {
      height: auto; 
    }

    .case-study-content__title {
      font-size: var(--text-xl);
    }

    .case-study-content__summary {
      font-size: var(--text-sm);
      margin-bottom: var(--space-2);
    }
  }
</style>

