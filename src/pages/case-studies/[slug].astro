---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';

export async function getStaticPaths() {
  const caseStudies = await getCollection('case-studies');
  return caseStudies.map((entry) => {
    const slug = entry.id.replace(/\.md$/, '');
    return {
      params: { slug },
      props: { entry },
    };
  });
}

interface Props {
  entry: CollectionEntry<'case-studies'>;
}

const { entry } = Astro.props;

const { Content } = await entry.render();
const { title, description, customer } = entry.data;
---

<Layout title={title} description={description}>
  <Header />
  <main id="content" class="section section-light py-16">
    <div class="container">
      <article class="max-w-4xl mx-auto">
        <header class="mb-8">
          <h1 class="text-heading font-heading text-text-darker mb-6">{title}</h1>
          <p class="text-xl font-body text-text-dark leading-relaxed mb-6">{description}</p>
          
          {customer && (
            <p class="text-lg font-semibold text-text-darker mb-2">Client: {customer}</p>
          )}
        </header>

        <!-- Render the markdown/MDX body content using Astro's Content component -->
        <article class="prose prose-lg max-w-none">
          <Content />
        </article>
      </article>
    </div>
  </main>
  <Footer />
</Layout>
